(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{384:function(t,a,s){"use strict";s.r(a);var e=s(48),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"sonar-testing-tool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sonar-testing-tool"}},[t._v("#")]),t._v(" Sonar (Testing tool)")]),t._v(" "),s("p",[t._v('Sonar is a testing tool used as part of our first-pass end to end tests.\nIt allows creating peers that will attempt to "ping" other specified\npeers and wait for them to ping back.')]),t._v(" "),s("p",[t._v("Once sonar has managed to ping all its peers, it then waits to receive pings\nfrom all other defined peers, and exits.")]),t._v(" "),s("h2",{attrs:{id:"env-vars"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#env-vars"}},[t._v("#")]),t._v(" Env vars")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("NIMONA_PEER_PRIVATE_KEY")]),t._v(" - Private key for peer.")]),t._v(" "),s("li",[s("code",[t._v("NIMONA_PEER_BIND_ADDRESS")]),t._v(" - Address (in the "),s("code",[t._v("ip:port")]),t._v(" format) to bind sonar to.")]),t._v(" "),s("li",[s("code",[t._v("NIMONA_PEER_BOOTSTRAPS")]),t._v(" - Bootstrap peers to use (in the "),s("code",[t._v("publicKey@tcps:ip:port")]),t._v("\nshorthand format).")]),t._v(" "),s("li",[s("code",[t._v("NIMONA_SONAR_PING_PEERS")]),t._v(" - Public keys of the peers to lookup and ping.")])]),t._v(" "),s("h2",{attrs:{id:"example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("p",[t._v("Create three peers, one that will be a bootstrap peer.")]),t._v(" "),s("div",{staticClass:"language-txt extra-class"},[s("pre",{pre:!0,attrs:{class:"language-txt"}},[s("code",[t._v("Peer 1 (bootstrap):\n  * port: 17000\n  * private: zrv1ZUTssgEcsJqcuwWcs9rcDNTMg1uptVpW6YkbUckxh5LErpZENo757V39dEidGsZuPBSbsgf3hZSrLFVPPRPdUQq\n  * public: z6MkwRpBRDowAYyZ5rHTMfue7HeR22GhKgaSvNDSco4tJN5X\n\nPeer 2:\n  * port: 17001\n  * private: zrv22oiqYfnUM7oKvk1nU2fBCWoaAdftuTxWjmdGMAik4XWck279nD9RknRCBNUFh3Dw6zLoHfMCNBhHKHADmiBfpew\n  * public: z6Mkmctpx1kWoGoFLKv6Qgx2ayvmZ6XWVfWv5WwF3ZE9DZLP\n\nPeer 3:\n  * port: 17002\n  * private: zrv413HQfEHGdWGVtq2zwdxa9YwcWxpSsZqVwmppSt12RBV1tYhSt7AZ8zGPhkgj14CkutXLBeosESBV4NyWc5HaoSo\n  * public: z6MkptMyu7ikDQdrkHyvW3aMwhxzULbxLAeYxeZ7KE6xe8tP\n")])])]),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_LOG_LEVEL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("error "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_UPNP_DISABLE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_PEER_BIND_ADDRESS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0:17000 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_PEER_PRIVATE_KEY")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("zrv1ZUTssgEcsJqcuwWcs9rcDNTMg1uptVpW6YkbUckxh5LErpZENo757V39dEidGsZuPBSbsgf3hZSrLFVPPRPdUQq "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\ngo run ./cmd/bootstrap/main.go\n")])])]),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_LOG_LEVEL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("error "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_UPNP_DISABLE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_PEER_BIND_ADDRESS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0:17001 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_PEER_PRIVATE_KEY")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("zrv22oiqYfnUM7oKvk1nU2fBCWoaAdftuTxWjmdGMAik4XWck279nD9RknRCBNUFh3Dw6zLoHfMCNBhHKHADmiBfpew "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_SONAR_PING_PEERS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("z6MkptMyu7ikDQdrkHyvW3aMwhxzULbxLAeYxeZ7KE6xe8tP "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_PEER_BOOTSTRAPS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("z6MkwRpBRDowAYyZ5rHTMfue7HeR22GhKgaSvNDSco4tJN5X@tcps:0.0.0.0:17000 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\ngo run ./cmd/sonar/main.go\n")])])]),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_LOG_LEVEL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("error "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_UPNP_DISABLE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_PEER_BIND_ADDRESS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0:17002 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_PEER_PRIVATE_KEY")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("zrv413HQfEHGdWGVtq2zwdxa9YwcWxpSsZqVwmppSt12RBV1tYhSt7AZ8zGPhkgj14CkutXLBeosESBV4NyWc5HaoSo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_SONAR_PING_PEERS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("z6Mkmctpx1kWoGoFLKv6Qgx2ayvmZ6XWVfWv5WwF3ZE9DZLP "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NIMONA_PEER_BOOTSTRAPS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("z6MkwRpBRDowAYyZ5rHTMfue7HeR22GhKgaSvNDSco4tJN5X@tcps:0.0.0.0:17000 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\ngo run ./cmd/sonar/main.go\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);