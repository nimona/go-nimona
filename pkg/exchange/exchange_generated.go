// Code generated by nimona.io/tools/codegen. DO NOT EDIT.

package exchange

import (
	json "encoding/json"

	"nimona.io/pkg/crypto"
	object "nimona.io/pkg/object"
	stream "nimona.io/pkg/stream"
)

type (
	ObjectRequest struct {
		ObjectHash *object.Hash      `json:"objectHash:o,omitempty"`
		Signature  *crypto.Signature `json:"@signature:o,omitempty"`
		Authors    []*stream.Author  `json:"authors:ao,omitempty"`
	}
	ObjectForward struct {
		Recipient string            `json:"recipient:s,omitempty"`
		FwObject  *object.Object    `json:"fwObject:o,omitempty"`
		Signature *crypto.Signature `json:"@signature:o,omitempty"`
		Authors   []*stream.Author  `json:"authors:ao,omitempty"`
	}
)

func (e *ObjectRequest) GetType() string {
	return "nimona.io/exchange.ObjectRequest"
}

func (e *ObjectRequest) ToObject() object.Object {
	m := map[string]interface{}{}
	m["@type:s"] = "nimona.io/exchange.ObjectRequest"
	if e.ObjectHash != nil {
		m["objectHash:o"] = e.ObjectHash.ToObject().ToMap()
	}
	if e.Signature != nil {
		m["@signature:o"] = e.Signature.ToObject().ToMap()
	}
	if len(e.Authors) > 0 {
		m["authors:ao"] = func() []interface{} {
			a := make([]interface{}, len(e.Authors))
			for i, v := range e.Authors {
				a[i] = v.ToObject().ToMap()
			}
			return a
		}()
	}
	return object.Object(m)
}

func (e *ObjectRequest) FromObject(o object.Object) error {
	b, _ := json.Marshal(map[string]interface{}(o))
	return json.Unmarshal(b, e)
}

func (e *ObjectForward) GetType() string {
	return "nimona.io/exchange.ObjectForward"
}

func (e *ObjectForward) ToObject() object.Object {
	m := map[string]interface{}{}
	m["@type:s"] = "nimona.io/exchange.ObjectForward"
	m["recipient:s"] = e.Recipient
	if e.FwObject != nil {
		m["fwObject:o"] = e.FwObject.ToObject().ToMap()
	}
	if e.Signature != nil {
		m["@signature:o"] = e.Signature.ToObject().ToMap()
	}
	if len(e.Authors) > 0 {
		m["authors:ao"] = func() []interface{} {
			a := make([]interface{}, len(e.Authors))
			for i, v := range e.Authors {
				a[i] = v.ToObject().ToMap()
			}
			return a
		}()
	}
	return object.Object(m)
}

func (e *ObjectForward) FromObject(o object.Object) error {
	b, _ := json.Marshal(map[string]interface{}(o))
	return json.Unmarshal(b, e)
}
